val = 0;
counter = 0;

fork {
    while (counter < 100) {
        when (val % 2 == 0);
        counter = counter + 1;
        val = val + 1;
    };
} and {
    while (counter < 100) {
        when (val % 2 == 1);
        counter = counter + 1;
        val = val + 1;
    };
};
